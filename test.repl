e51: CPU.RiscV64 @ sysbus
    cpuType: "rv64imac"
    hartId: 0
    privilegeArchitecture: PrivilegeArchitecture.Priv1_10
    timeProvider: clint
    CyclesPerInstruction: 8
    init:
        RegisterCustomCSR "BPM" 0x7C0 Machine

u54_1: CPU.RiscV64 @ sysbus
    cpuType: "rv64gc"
    hartId: 1
    privilegeArchitecture: PrivilegeArchitecture.Priv1_10
    timeProvider: clint
    CyclesPerInstruction: 8
    init:
        RegisterCustomCSR "BPM" 0x7C0 Machine

u54_2: CPU.RiscV64 @ sysbus
    cpuType: "rv64gc"
    hartId: 2
    privilegeArchitecture: PrivilegeArchitecture.Priv1_10
    timeProvider: clint
    CyclesPerInstruction: 8
    init:
        RegisterCustomCSR "BPM" 0x7C0 Machine

u54_3: CPU.RiscV64 @ sysbus
    cpuType: "rv64gc"
    hartId: 3
    privilegeArchitecture: PrivilegeArchitecture.Priv1_10
    timeProvider: clint
    CyclesPerInstruction: 8
    init:
        RegisterCustomCSR "BPM" 0x7C0 Machine

u54_4: CPU.RiscV64 @ sysbus
    cpuType: "rv64gc"
    hartId: 4
    privilegeArchitecture: PrivilegeArchitecture.Priv1_10
    timeProvider: clint
    CyclesPerInstruction: 8
    init:
        RegisterCustomCSR "BPM" 0x7C0 Machine

clint: IRQControllers.CoreLevelInterruptor  @ sysbus 0x2000000
    frequency: 1000000
    numberOfTargets: 5
    [0, 1] -> e51@[3, 7]
    [2, 3] -> u54_1@[3, 7]
    [4, 5] -> u54_2@[3, 7]
    [6, 7] -> u54_3@[3, 7]
    [8, 9] -> u54_4@[3, 7]

pdma: DMA.MPFS_PDMA @ sysbus 0x3000000
    [0-7] -> plic@[5-12]

plic: IRQControllers.PlatformLevelInterruptController @ sysbus 0xc000000
    // E51: only machine mode interrupt
    0 -> e51@11
    // No user mode or hypervisor mode interrupts
    [1,2] -> u54_1@[11,9]
    [3,4] -> u54_2@[11,9]
    [5,6] -> u54_3@[11,9]
    [7,8] -> u54_4@[11,9]
    numberOfSources: 186
    numberOfContexts: 9
    prioritiesEnabled : false

mmuart1: Verilated.VerilatedUART @ sysbus <0x20100000, +0x1000>
    frequency: 150000000
    address: "127.0.0.1"
    IRQ -> plic@91 | u54_1@27


mmuart0: UART.NS16550 @ sysbus 0x20000000
    wideRegisters: true
    IRQ -> plic@90 | e51@27
/*
mmuart1: UART.NS16550 @ sysbus 0x20100000
    wideRegisters: true
    IRQ -> plic@91 | u54_1@27
*/
mmuart2: UART.NS16550 @ sysbus 0x20102000
    wideRegisters: true
    IRQ -> plic@92 | u54_2@27

mmuart3: UART.NS16550 @ sysbus 0x20104000
    wideRegisters: true
    IRQ -> plic@93 | u54_3@27

mmuart4: UART.NS16550 @ sysbus 0x20106000
    wideRegisters: true
    IRQ -> plic@94 | u54_4@27

l2Lim: Memory.MappedMemory @ sysbus 0x08000000
    size: 0x02000000
